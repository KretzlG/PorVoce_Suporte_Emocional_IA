{% extends "dashboards/dashboard-base.html" %}

{% block title %}Meu Espaço - Por Você{% endblock %}

{% block page_title %}
<div class="d-flex justify-content-between align-items-center mb-4">
	<h2 class="fw-bold mb-0">Meu Espaço</h2>
	<div class="text-muted">
		<i class="fas fa-calendar-alt me-1"></i>
		{{ moment().format('DD/MM/YYYY') if moment else '' }}
	</div>
</div>
{% endblock %}

{% block dashboard_content %}
<div class="container-fluid">
	<!-- Card de Boas-vindas -->
	<div class="row mb-4">
		<div class="col-12">
			<div class="card shadow-sm border-0" style="background:#fff;">
				<div class="card-body d-flex align-items-center">
					<div class="me-3 display-6 text-primary"><i class="fas fa-heart"></i></div>
					<div>
						<div class="fs-4 fw-bold text-primary">Bem-vindo(a), {{ current_user.first_name or 'Usuário' }}!</div>
						<div class="text-muted">Este é seu espaço de apoio emocional. Estamos aqui para você.</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Cards de Estatísticas -->
	<div class="row mb-4 dashboard-stats">
		<div class="col-xl-3 col-md-6 mb-4">
			<div class="stat-card">
				<div class="d-flex align-items-center mb-2">
					<div class="me-3 display-6 text-info"><i class="fas fa-comments"></i></div>
					<div>
						<div class="fs-6 fw-semibold text-uppercase mb-1">Conversas</div>
						<div class="fs-3 fw-bold" data-counter="{{ user_stats.total_chats or 0 }}">{{ user_stats.total_chats or 0 }}</div>
						<div class="text-muted small">Realizadas</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-md-6 mb-4">
			<div class="stat-card">
				<div class="d-flex align-items-center mb-2">
					<div class="me-3 display-6 text-success"><i class="fas fa-book"></i></div>
					<div>
						<div class="fs-6 fw-semibold text-uppercase mb-1">Diário</div>
						<div class="fs-3 fw-bold" data-counter="0">0</div>
						<div class="text-muted small">Entradas</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-md-6 mb-4">
			<div class="stat-card">
				<div class="d-flex align-items-center mb-2">
					<div class="me-3 display-6 text-primary"><i class="fas fa-chart-line"></i></div>
					<div>
						<div class="fs-6 fw-semibold text-uppercase mb-1">Progresso</div>
						<div class="fs-3 fw-bold" data-counter="0">0</div>
						<div class="text-muted small">Avaliações</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-md-6 mb-4">
			<div class="stat-card">
				<div class="d-flex align-items-center mb-2">
					<div class="me-3 display-6 text-danger"><i class="fas fa-clock"></i></div>
					<div>
						<div class="fs-6 fw-semibold text-uppercase mb-1">Último Acesso</div>
						<div class="fs-6 fw-bold">
							{% if user_stats.last_activity %}
								{{ user_stats.last_activity.strftime('%d/%m') if user_stats.last_activity.strftime else 'Hoje' }}
							{% else %}
								Hoje
							{% endif %}
						</div>
						<div class="text-muted small">Data</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Seção de Recursos e Atividades -->
	<div class="row mb-4">
		<div class="col-lg-6 mb-4">
			<div class="card shadow-sm border-0" style="background:#fff;">
				<div class="card-body">
					<h5 class="fw-bold mb-3"><i class="fas fa-lightbulb me-2 text-primary"></i>Recursos de Bem-estar</h5>
					<div class="row">
						<div class="col-12 mb-3">
							<div class="d-flex align-items-center">
								<div class="bg-light-success rounded-circle p-3 me-3">
									<i class="fas fa-leaf text-success"></i>
								</div>
								<div>
									<h6 class="mb-1">Respiração</h6>
									<small class="text-muted">Exercícios de relaxamento</small>
								</div>
							</div>
						</div>
						<div class="col-12 mb-3">
							<div class="d-flex align-items-center">
								<div class="bg-light-info rounded-circle p-3 me-3">
									<i class="fas fa-heart text-info"></i>
								</div>
								<div>
									<h6 class="mb-1">Apoio 24/7</h6>
									<small class="text-muted">Sempre disponível</small>
								</div>
							</div>
						</div>
						<div class="col-12 mb-3">
							<div class="d-flex align-items-center">
								<div class="bg-light-danger rounded-circle p-3 me-3">
									<i class="fas fa-shield-alt text-danger"></i>
								</div>
								<div>
									<h6 class="mb-1">Privacidade</h6>
									<small class="text-muted">Totalmente confidencial</small>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-lg-6 mb-4">
			<div class="card shadow-sm border-0" style="background:#fff;">
				<div class="card-body">
					<h5 class="fw-bold mb-3"><i class="fas fa-history me-2 text-info"></i>Atividades Recentes</h5>
					<div class="list-group list-group-flush">
						{% if recent_entries and recent_entries|length > 0 %}
							{% for entry in recent_entries %}
							<div class="list-group-item border-0 px-0">
								<div class="d-flex align-items-center">
									<i class="fas fa-circle text-info me-2" style="font-size: 0.5rem;"></i>
									<span>{{ entry.title or entry.text[:50] + '...' if entry.text and entry.text|length > 50 else entry.text or 'Atividade' }}</span>
								</div>
							</div>
							{% endfor %}
						{% else %}
						<div class="list-group-item border-0 px-0 text-muted text-center py-4">
							<i class="fas fa-inbox fs-2 mb-2 d-block text-muted"></i>
							Nenhuma atividade recente.
							<br><small>Comece uma conversa para ver suas atividades aqui!</small>
						</div>
						{% endif %}
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock %}
